@model ViewModels.CandidateViewModel
@{
    ViewBag.Title = "CandidateProfile";
}
<!-- partial -->
<style>
    .nav-pills.nav-pills-custom .nav-link.active {
        background: #1C2F8C;
        color: #ffffff;
    }
</style>

<div class="container-fluid row">
    <div class="col-12">
        <div class="card">
            <div class="card-body">
                <div class="row">
                    <div class="col-lg-4">
                        <div class="border-bottom text-center pb-4">
                            @if (Model.CandidateInfo != null)
                            {
                                if (Model.CandidateInfo.User.UserImage != null)
                                {
                                    if (Model.CandidateInfo.User.UserImage.Length > 10)
                                    {
                                        <img src="data:image/jpeg;base64,@Model.CandidateInfo.User.UserImage.ToString().Replace(" &quot;", "")" alt="profile" style="height: 92px; width: 92px;" class="img-lg rounded-circle mb-3" />
                                    }
                                    else
                                    {
                                        <img src="~/assets/img/noProfile.png" alt="profile" style="height: 92px; width: 92px; " class="img-lg rounded-circle mb-3" />
                                    }
                                }
                                else
                                {
                                    <img src="~/assets/img/noProfile.png" alt="profile" style="height: 92px; width: 92px; " class="img-lg rounded-circle mb-3" />
                                }
                            }
                            else
                            {
                                <img src="~/assets/img/noProfile.png" alt="profile" style="height: 92px; width: 92px; " class="img-lg rounded-circle mb-3" />
                            }

                            @if (Model.UsersInfo != null)
                            {
                                <div class="mb-3">
                                    <h3>@Model.UsersInfo.FullName  </h3>
                                    <div class="d-flex align-items-center">
                                    </div>
                                </div>
                                <div class="d-flex justify-content-center">
                                    <button class="btn btn-sm btn-primary me-1" onclick="DownloadCandidateResume('',@Model.UsersInfo.Id.ToString())">Download CV <span class="ti-download"></span>  </button>
                                </div>
                            }
                        </div>


                        <div class="py-4">
                            <p class="clearfix">
                                <span class="float-left">
                                    Status
                                </span>
                                <span class="float-right text-muted">
                                    Active
                                </span>
                            </p>
                            <p class="clearfix">
                                <span class="float-left">
                                    Phone
                                </span>
                                <span class="float-right text-muted">
                                    006 3435 22
                                </span>
                            </p>
                            <p class="clearfix">
                                <span class="float-left">
                                    Mail
                                </span>
                                <span class="float-right text-muted">
                                    @if (Model.UsersInfo != null)
                                    {
                                        @Model.UsersInfo.UserEmail
                                    }
                                </span>
                            </p>
                            <p class="clearfix">
                                <span class="float-left">
                                    Facebook
                                </span>
                                <span class="float-right text-muted">
                                    <a href="#">David Grey</a>
                                </span>
                            </p>
                            <p class="clearfix">
                                <span class="float-left">
                                    Twitter
                                </span>
                                <span class="float-right text-muted">
                                    <a href="#">@@davidgrey</a>
                                </span>
                            </p>
                        </div>
                    </div>
                    <div class="col-lg-8">
                        <div class="col-md-10 mx-auto">
                            <ul class="nav nav-pills nav-pills-custom" id="pills-tab-custom" role="tablist">
                                <li class="nav-item">
                                    <a class="nav-link active" id="pills-home-tab-custom" data-bs-toggle="pill" href="#pills-health" role="tab" aria-controls="pills-home" aria-selected="true">
                                        Profile
                                    </a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" id="pills-profile-tab-custom" data-bs-toggle="pill" href="#pills-career" role="tab" aria-controls="pills-profile" aria-selected="false">
                                        Job Applied
                                    </a>
                                </li>

                            </ul>
                            <div class="tab-content tab-content-custom-pill" id="pills-tabContent-custom">
                                <div class="tab-pane fade show active" id="pills-health" role="tabpanel" aria-labelledby="pills-home-tab-custom">
                                    <div class="profile-feed border-bottom">
                                        <h3>About Candidate</h3>
                                        <br />
                                        @Html.Raw(Model.CandidateDescription)
                                    </div>

                                    <div class="profile-feed border-bottom">
                                        <br />
                                        <h4 class="card-title">Education</h4>
                                        <ul class="bullet-line-list">
                                            @if (Model.CandidateInfo != null)
                                            {
                                                foreach (var item in Model.CandidateInfo.CandidateQualifications)
                                                {
                                                    <li>
                                                        <h5><strong>@item.DegreeName</strong></h5>
                                                        <p>@item.Specialization - @item.InstitutionName</p>
                                                        <p class="text-muted mb-4">
                                                            <i class="ti-time"> </i>
                                                            @{
                                                                var FromYear = new DateTime(item.DgrFrmYear.Value, item.DgrFrmMonth.Value, 1).ToString("MMM-yyyy");
                                                                var ToYear = item.DgrToYear == null ? " - " : new DateTime(item.DgrToYear.Value, item.DgrToMonth.Value, 1).ToString("MMM-yyyy");
                                                                <text>
                                                                    @FromYear  -  @ToYear
                                                                </text>



                                                            }
                                                        </p>

                                                    </li>

                                                }
                                            }
                                            else
                                            {
                                                <li>No Record Found</li>

                                            }


                                        </ul>
                                    </div>

                                    <div class="profile-feed border-bottom">
                                        <br />
                                        <h4 class="card-title">Experience</h4>
                                        <ul class="bullet-line-list">
                                            @if (Model.CandidateInfo != null)
                                            {
                                                foreach (var item in Model.CandidateInfo.CandidateExperinces)
                                                {
                                                    <li>
                                                        <h5><strong>@item.DesignationName - @item.CompanyName </strong></h5>

                                                        <p class="text-muted mb-4">
                                                            <i class="ti-time"> </i>
                                                            @{
                                                                var FromYear = item.FromYear == 0 || item.FromYear == null ? " - " : new DateTime(item.FromYear.Value, item.FromMonth.Value, 1).ToString("MMM-yyyy");
                                                                var ToYear = item.ToYear == null || item.ToYear == 0 ? " - " : new DateTime(item.ToYear.Value, item.ToMonth.Value, 1).ToString("MMM-yyyy");
                                                                <text>
                                                                    @FromYear  -  @ToYear
                                                                </text>



                                                            }
                                                        </p>
                                                        <p>Job Duties: <span> @Html.Raw(item.JobDuties)</span> </p>


                                                    </li>
                                                }
                                            }
                                            else
                                            {
                                                <li>No Record Found</li>
                                            }
                                        </ul>
                                    </div>
                                </div>
                                <div class="tab-pane fade" id="pills-career" role="tabpanel" aria-labelledby="pills-profile-tab-custom">
                                    <table class="table">
                                        <thead>
                                            <tr>
                                                <th class="pt-1 ps-0 text-center">
                                                    Job Title
                                                </th>
                                                <th class="pt-1 text-center">
                                                    Applied Date
                                                </th>
                                                <th class="pt-1 text-center">
                                                    Applied Channel
                                                </th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            @if (Model.UsersInfo != null)
                                            {
                                                foreach (var item in Model.UsersInfo.CandidateJobApplies)
                                                {
                                                    <tr>
                                                        <td class="py-1 ps-0">
                                                            <div class="d-flex align-items-center">
                                                                <div class="ms-3">
                                                                    <p class="mb-0">@item.AllPosition.JobTitle</p>
                                                                    <p class="mb-0 text-muted text-small">Product Designer</p>
                                                                </div>
                                                            </div>
                                                        </td>
                                                        <td>
                                                            @item.AppliedOn.Value.ToString("dd-MMM-yyyy HH:mm tt")
                                                        </td>
                                                        <td class="text-center">
                                                            @if (item.ApplyByCV == false)
                                                            {
                                                                <label class="badge badge-success">Profile</label>
                                                            }
                                                            else
                                                            {
                                                                <label class="badge badge-success">CV</label>
                                                            }

                                                        </td>
                                                    </tr>
                                                }
                                                if (Model.UsersInfo.CandidateJobApplies.Count == 0)
                                                {
                                                    <tr class="text-center">
                                                        <td colspan="3">No Record Found</td>
                                                    </tr>
                                                }
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
